{{- $page := .page -}}
{{- $site := .site -}}
{{- range sort .menu -}}
    <li itemscope itemtype="http://schema.org/SiteNavigationElement">
        <a class="main-nav button{{if or ($page.IsMenuCurrent "main" .) ($page.HasMenuCurrent "main" .) }} active{{end}}" tabindex="0" href="{{ .URL }}" >
            {{ .Name | upper }}
        </a>
        {{- if .HasChildren -}}
            <ul class="vertical menu">
                {{ partial "nested_menu.html" (dict "menu" .Children "page" $page "site" $site) }}
            </ul>
        {{- end -}}
    </li>
{{- end -}}
